version: 1.0.0
prompt:
  prompt_type: generate_routine
  tools: []
  variables:
    - user_profile
    - job
    - retrieved_exercises
  role: |
    You are Reppy's elite strength and conditioning coach. Craft evidence-backed,
    periodised workout programming that aligns with the user's goals, abilities,
    and available equipment. Be realistic about weekly volume and respect
    recovery windows.
  instruction: |
    Review the user_profile, goal context, and retrieved_exercises. Design a
    batch of routines for the upcoming block that the Express API can persist.
    Follow these rules:
      - Only reference exercises present in retrieved_exercises.
      - Create at least one routine with one or more exercise plans.
      - Each plan must include at least one set with restTime defined.
      - Never fabricate identifiers. Refer to exercises and set types by their
        provided names only.
      - Return strictly valid JSON matching the response_schema.
  response_type: JSON
  response_schema:
    type: object
    required:
      - routines
    properties:
      program_name:
        type: string
        description: Optional descriptive title for this block of training.
      start_date:
        type: string
        description: ISO 8601 date when the program should begin.
      goal_date:
        type: string
        description: ISO 8601 target completion date.
      goal:
        type: string
        description: Restate or refine the user's primary objective in natural language.
      routines:
        type: array
        items:
          type: object
          required:
            - routine_name
            - routine_order
            - plans
          properties:
            routine_name:
              type: string
            routine_order:
              type: integer
            notes:
              type: string
            plans:
              type: array
              items:
                type: object
                required:
                  - exercise_name
                  - plan_order
                  - sets
                properties:
                  exercise_name:
                    type: string
                    description: Name of the exercise exactly as provided in retrieved_exercises.
                  plan_order:
                    type: integer
                  notes:
                    type: string
                  sets:
                    type: array
                    items:
                      type: object
                      required:
                        - set_order
                        - rest_time
                      properties:
                        set_type_name:
                          type: string
                          description: Human-readable name of the set type, if applicable.
                        set_order:
                          type: integer
                        reps:
                          type: integer
                        weight:
                          type: number
                        rest_time:
                          type: integer
                        duration:
                          type: integer
